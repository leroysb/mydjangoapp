{% extends "core/base.html" %}
{% load static %}
{% load social_share %}

{% block meta %}
<title>{{ article.title }} | A-Z Logs, a blog by Leroy Buliro</title>
<meta name="description" content="{{ article.extract }}">
<meta name="keyword" content="{{episode.tags}}">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@leroybuliro">
<meta name="twitter:creator" content="@leroybuliro">
<meta name="twitter:title" content="{{ article.title }} | Leroy Buliro">
<meta name="twitter:description" content="{{ article.extract }}">
<meta name="twitter:image" content="">

<!-- Facebook -->
<meta property="og:url" content="https://leroybuliro.com/">
<meta property="og:title" content="{{ article.title }} | Leroy Buliro">
<meta property="og:description" content="{{ article.extract }}">
<meta property="og:type" content="website">
<meta property="og:image" content="">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1000">
<meta property="og:image:height" content="500">
{% endblock meta %}

{% block style %}
<link rel="stylesheet" href="{% static 'core/articlelayout.css' %}">
{% endblock style %}

{% block script %}
<script src="{% static 'core/articlelayout.js' %}"></script>
{% endblock script %}

{% block navmenu %}
<div class="navmenu">
    <!-- <a href="{% url 'core:index' %}">HOME</a> -->
    <a  href="{% url 'core:event' %}">EVENTS</a>
    <a href="{% url 'core:blogpage' %}">BLOG</a>
    <a href="{% url 'core:podcast' %}">PODCAST</a>
</div>
{% endblock navmenu %}

{% block mobmenu %}
<div class="mobile-menu">
    <!-- <a href="{% url 'core:index' %}">HOME</a> -->
    <a href="{% url 'core:event' %}">EVENTS</a>
    <a href="{% url 'core:blogpage' %}">BLOG</a>
    <a href="{% url 'core:podcast' %}">PODCAST</a>
</div>
{% endblock mobmenu %}

{% block body %}

<div class="articlepage">

    <article>
        <section class="articlemeta">
            <img src="{{ article.featureimage.url }}" alt="{{ article.title }}" height="720" width="480" style="height: auto; width: 100%; object-fit: cover;">
            <div class="meta">
                <p style="color: #000; font-family: CrimsonPro; font-size:48px; font-weight: bold; text-align: center; line-height: 1rem;">A-Z LOGS</p>
                <div id="category">{{ article.category }}</div>
                <div id="title">{{ article.title }}</div>
                <div id="pubDate">{{ article.publishdate }}</div>
                <hr style="border-top: 1px #000 solid; padding: 0% 20%; margin: 0;"/>
                <div style="display: flex; flex-direction: row; justify-content: space-between; width: 40%;">

                    <a href="#sharenow" class="stat" style="position: relative; cursor: pointer;">
                        <img id="sharebtn" src="{% static 'core/media/share_black.png' %}" alt="share article" width="20" height="20" >
                        <span class="stats">0</span>
                    </a>
                    <div class="stat">
                        <img src="{% static 'core/media/view_black.png' %}" alt="reads" width="20" height="20" >
                        <span class="stats">{{ article.viewsCount }}</span>
                    </div>
                    <a href="#commentnow" class="stat">
                        <img src="{% static 'core/media/comment_black.png' %}" alt="post comment" width="20" height="20" >
                        <span class="stats">{{ article.comments.count }}</span>
                    </a>
                </div>
            </div>
        </section>
    
        <div class="articlecontent">
            {% if article.credit %}
            <p id="credit">{{ article.credit }}</p>
            {% else %}
            <div style="display: none;"></div>
            {% endif %}
            <div class="content">{{ article.content | safe }}</div>
        </div>
    </article>
    
    <div>
        <p class="entryend" id="sharenow">END OF ENTRY</p>
    </div>
    
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <span style="color: #ffffff; font-size: small;">SHARE THIS STORY</span>
        <!-- <br/> -->
        <!-- <div class="share-options"> -->
        <div class="social-share">

            <!-- {% post_to_twitter 
                "{{ article.title }}"
                "{{ request.build_absolute_uri }}"  
                "<p class="social-share-btn" href="https://twitter.com/share?url=<URL>&text=<TEXT>via=<USERNAME>" target="_blank">
                    <img src="{% static 'core/media/twitterShare.png' %}" alt="twitter">
                </p>"
            %} -->

            <!-- {% post_to_facebook "{{ request.build_absolute_uri }}" "Facebook" %} -->
            <!-- <a class="social-share-btn" href="https://www.facebook.com/sharer/sharer.php?u=<URL>" target="_blank">
                <img src="{% static 'core/media/facebookShare.png' %}" alt="share on facebook">
            </a> -->

            <div>
                {% post_to_linkedin "{{ request.build_absolute_uri }}" %}
            </div>
            <!-- <a class="social-share-btn" href="https://www.linkedin.com/shareArticle?url=<URL>&title=<TITLE>&summary=<SUMMARY>&source=<SOURCE_URL>" target="_blank">
                <img src="{% static 'core/media/linkedinShare.png' %}" alt="share on linkedin">
            </a> -->

            <!-- {% post_to_whatsapp "{{ request.build_absolute_uri }}" "whatsapp" %} -->
            <!-- <a class="social-share-btn" href="https://leroybuliro.net/{{ request.build_absolute_url }}/" target="_blank">
                <img src="{% static 'core/media/whatsappShare.png' %}" alt="share on whatsapp">
            </a> -->

            <!-- {% post_to_telegram "{{ article.title }}" "{{ request.build_absolute_uri }}" "telegram"  %} -->
            <!-- <a class="social-share-btn" href="https://leroybuliro.net/{{ request.build_absolute_url }}/" target="_blank">
                <img src="{% static 'core/media/telegramShare.png' %}" alt="share on telegram">
            </a> -->

            <div>
                {% save_to_pinterest "{{ request.build_absolute_uri }}"  %}
            </div>
            <!-- <a class="social-share-btn" href="https://leroybuliro.net/{{ request.build_absolute_url }}/" target="_blank">
                <img src="{% static 'core/media/pinterestShare.png' %}" alt="share on pinterest">
            </a> -->
        </div>
        <!-- </div> -->
        
    </div>

    <div class="aboutsec" id="commentnow">
        <img src="{% static 'core/media/about.jpg' %}" alt="leroy" style="border-radius: 50%; border: 1px #c2c2c2b9 solid; max-width: 7em; padding: 0.3em;">
        <div>
            <p class="header">Join the Discussion</h2>
            <p>Hi there. Welcome to my personal website, a place for me to log snapshots of my life over the years, share stories as told by others, and periodically post technical content that may interest a couple other people. Thank you for being part of the community.</p>
        </div>
        <button onclick="document.getElementById('id01').style.display='block'">Send feedback</button>
        {% if user.is_authenticated %}
        <button onclick="document.getElementById('id02').style.display='block'">Add a comment</button>
        {% else %}
        <a href="{% url 'account:auth' %}"><button>Please log in or sign up to comment</button></a>
        {% endif %}
        <p class="responses">{{ article.comments.count }} responses</h5>
    </div>

    <div class="commentsec">
    {% if article.comments.count >= 1 %}

        {% for comment in article.comments.all %}
        <div class="commentBox">
            <p style="text-transform: capitalize; color: #c2c2c2b9; font-weight: bolder;">{{ comment.name.username }}</p>
            <p style="color: #c2c2c2b9;">{{ comment.postdate | timesince }} ago</p>
            <br>
            <p>{{ comment.comment | safe }}</p>
        </div>
        {% endfor %}
    {% endif %}
    </div>
        
</div>

{% if user.is_authenticated %}
<div id="id02" class="Cmodal">
    
    <div class="Cmodal-content" style="max-width:600px">
        
        <div style="padding: 0.01em;">
            <p style="text-align: left; color: #000; font-size: x-large; font-weight: bold;">Add a comment!</p>
            <span onclick="document.getElementById('id02').style.display='none'" class="modal-close-btn" title="Close">&times;</span>
        </div>
        
        <form class="modal-container" method="POST" action="">
            {% csrf_token %}
            <!-- <input type="hidden" name="post" value="{{ article }}"> -->
            <div class="modal-section">
                <div>
                    <textarea name="comment" rows="4" type="text" style="width: 100%; padding: 4px; font-size: 14px; font-family: CrimsonPro;" placeholder="This conversation is moderated." required></textarea>
                    <p style="color: #929292; font-size: small; padding-top: 1px;">0/420 maximum characters.</p>
                </div>

                <div style="display: flex; justify-content: right; padding-top: 4px;">
                    <button class="modal-btn-alt" type="submit" name="submitcomment">Submit</button>
                    <button class="modal-btn" onclick="document.getElementById('id02').style.display='none'" type="button">Cancel</button>
                </div>
            </div>
        </form>

    </div>
</div>
{% endif %}

<div id="id01" class="modal">
    
    <div class="modal-content" style="max-width:600px">
        
        <div style="padding: 0.01em;">
            <p style="text-align: left; color: #000; font-size: x-large; font-weight: bold;">What's on your mind?</p>
            <span onclick="document.getElementById('id01').style.display='none'" class="modal-close-btn" title="Close">&times;</span>
        </div>
        
        <form class="modal-container" method="POST" action="">{% csrf_token %}
            <div class="modal-section">
                <div>
                    <textarea rows="4" type="text" style="width: 100%; padding: 4px; font-size: 14px; font-family: CrimsonPro;" placeholder="We appreciate hearing your thoughts. It helps us make things better." name="content" required></textarea>
                    <p style="color: #929292; font-size: small;">0/500 maximum characters.</p>
                </div>

                <div>
                    <p><b>Overall, how was your experience?</b></p>
                    <div class="rating">
                        <span><input type="radio" name="ratings" id="str5" value="5"><label for="str5">&star;</label></span>
                        <span><input type="radio" name="ratings" id="str4" value="4"><label for="str4">&star;</label></span>
                        <span><input type="radio" name="ratings" id="str3" value="3"><label for="str3">&star;</label></span>
                        <span><input type="radio" name="ratings" id="str2" value="2"><label for="str2">&star;</label></span>
                        <span><input type="radio" name="ratings" id="str1" value="1"><label for="str1">&star;</label></span>
                    </div>
                </div>

                <p>To protect your privacy, don't include your contact info.</p>

                <div style="display: flex; justify-content: right; padding-top: 12px;">
                    <button class="modal-btn-alt" type="submit" name="submitfeedback">Submit</button>
                    <button class="modal-btn" onclick="document.getElementById('id01').style.display='none'" type="button">Cancel</button>
                </div>
            </div>
        </form>

    </div>
</div>

{% endblock body %}