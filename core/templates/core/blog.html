{% extends "core/base.html" %}
{% load static %}

{% block head %}
<title>A-Z Logs, a blog by Leroy Buliro</title>
<meta name="description" content="A-Z Logs, a blog by Leroy Buliro">
<meta name="keyword" content="Kenya, Nairobi, booze, travel, nightlife, food, lifestyle, culture">
<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@leroybuliro">
<meta name="twitter:creator" content="@leroybuliro">
<meta name="twitter:title" content="A-Z Logs, a blog by Leroy Buliro">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="">

<!-- Facebook -->
<meta property="og:url" content="https://leroybuliro.com/">
<meta property="og:title" content="A-Z Logs, a blog by Leroy Buliro">
<meta property="og:description" content="">
<meta property="og:type" content="website">
<meta property="og:image" content="">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1000">
<meta property="og:image:height" content="500">
<link rel="stylesheet" href="{% static 'core/feedbackModal.css' %}">
<link rel="stylesheet" href="{% static 'core/blog.css' %}">
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@graph": [
        {
            "@id": "#site",
            "@type": "Website",
            "name": "Leroy Buliro",
            "author": "Leroy Buliro",
            "description": "Leroy Buliro: deejay, financial advisor, writer, podcaster",
            "url": "https://leroybuliro.com",
            "schemaVersion": "10.0",
            "keywords": "Kenya, Nairobi, booze, travel, nightlife, food, lifestyle, culture",
        },
        {
            "@type": "Blog",
            "isPartOf": "#site",
            "name": "A-Z Logs, a blog by Leroy Buliro",
            "description": "A-Z Logs, a blog by Leroy Buliro",
            "url": "https://leroybuliro.com/a-z-logs",
            "keywords": "Kenya, Nairobi, booze, travel, nightlife, food, lifestyle, culture",
        }
        ]
    }
</script>
<script>
    document.querySelector('.blogpage').addEventListener('load', ()=> {
    
        const articles = document.querySelectorAll('.articlediv');
        const firstload = 8

        document.querySelectorAll('.articlediv').forEach((article)=>
            article.style.display = 'none'
        );

        if(articles.length >= firstload ) {
            document.querySelector('#showbtn').style.display='flex';
        } else {
            document.querySelector('#showbtn').style.display='none';
        };

        for(let i = 0; i < firstload; i++){
            articles[i].style.display = 'block';
        };
    });


    const articlediv = document.querySelectorAll('.articlediv');
    var currentindex = 8

    document.querySelector('#loadnext').onclick = ()=> {
        
        var next = 8;

        for(var i = 0 ; i < next; i++){
            if(currentindex >= articlediv.length) {
                document.querySelector('#showbtn').style.display='none';
            } else {
                articlediv[i+currentindex].style.display = 'block';
            }
        }

        currentindex += next;
    };
</script>
{% endblock head %}

{% block navmenu %}
<a id="menuactive">BLOG</a>
<a href="{% url 'core:podcast' %}">PODCAST</a>
<a href="{% url 'store:catalogue' %}">SHOP</a>
{% endblock navmenu %}

{% block mobilemenu %}
<a href="{% url 'core:events' %}">
    <div class="mobile-menu-item">
        <img src="{% static 'core/media/tickets.svg' %}"></img>
        <span>Tickets</span>
    </div>
</a>
<a href="#">
    <div class="mobile-menu-item">
        <img src="{% static 'core/media/blog.svg' %}"></img>
        <span>Blog</span>
    </div>
</a>
<a href="{% url 'core:podcast' %}">
    <div class="mobile-menu-item">
        <img src="{% static 'core/media/podcast.svg' %}"></img>
        <span>Podcast</span>
    </div>
</a>
<a href="{% url 'store:catalogue' %}">
    <div class="mobile-menu-item">
        <img src="{% static 'core/media/shop.svg' %}"></img>
        <span>Shop</span>
    </div>
</a>
{% endblock mobilemenu %}

{% block page %}
<div>
    <div class="blogpage">
        <div class="centered">
            <p class="pageheader">A-Z LOGS</p>
            <p class="pagesubheader">A Leroy Buliro Blog</p>
        </div>
        
        {% if articles %}
        <div id="blogs">
            {% for article in articles %}
            <section class="articlediv">
                <a class="articlesec" href="{% url 'core:article' pk=article.id slug=article.slug %}">                    
                    <div class="image">
                        {% if article.featureimageURI %}
                        <img  class="blogimage" src="{{ article.featureimageURI }}" alt="{{ article.title }}">
                        {% else %}
                        <img  class="blogimage" src="{{ article.featureimage.url }}" alt="{{ article.title }}">
                        {% endif %}
                    </div>
                    <div class="blogmeta">
                        <p class="blogcategory">{{ article.category }}</p>
                        <h3 class="blogtitle">{{ article.title }}</h3>
                        <!-- {% if article.extract %}
                        <p class="extract" style="color: #ccc;">{{ article.extract  }}</p>
                        {% else %}
                        <p class="extract" style="color: #ccc;">{{ article.content | safe | truncatewords:24 }}</p>
                        {% endif %} -->
                        <p class="blogdate">{{ article.publishdate }}</p>
                    </div>
                </a>
            </section>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    <div id="showbtn">
        <button id="loadnext">SHOW MORE</button>
    </div>
</div>
{% endblock page %}

{% block footer %}
<footer>
    <a style="color: #fff;">Â© 2022 Leroy Buliro. All rights reserved.</a>
    <!-- <span>
        <a href="{% url 'core:legal' %}" style="color: #fff;">Legal</a>
    </span> -->
</footer>
{% endblock footer %}